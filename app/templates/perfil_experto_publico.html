<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi perfil experto</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/perfil_publico.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://i.postimg.cc/26ZkKCPm/Vector.png">
</head>
<body>

   {% include 'nav.html' %}
   {% include 'errors.html' %} 

  <!-- Primer cuadro navegación --> 
<div class= "experto"> 
  <div class="cuadro redondo">
    <div class="tabs">
      <span class="tab active">Perfil Experto</span>
    </div>
  </div>

  <!-- Segundo cuadro información principal -->
  <div class="cuadro grande">
    <div class="contenido-grande">
      <div class="titulo-principal">
        {{ perfil.primer_nombre }} {{ perfil.primer_apellido }}
      </div>

        {% if perfil.foto_perfil %}
       <!-- Círculo con ícono debajo del título -->
        <img src="{{ url_for('web.perfil_foto', filename=perfil.foto_perfil) }}" alt="Foto de perfil" class="image" />
        {% else %}
        <!-- Icono de Bootstrap como reemplazo -->
        <i class="bi bi-person-circle perfil-img placeholder-icon"></i>
        {% endif %}
  

  </div>

</div>


<!-- Contenedor dividido en dos columnas -->
  <div class="contenedor-columnas">
    <!-- Columna izquierda -->
    <div class="columna-izquierda">
      <!-- Título Descripción alineado a la izquierda -->
      <div class="titulo-izquierda">
        <span>Descripción</span>
      </div>

      <!-- Pequeña descripción debajo del título -->
      <div class="item-descripcion">
        <div class="descripcionicon">
          {% if descripcion_perfil %}
            <h3 class="descripcion-resumen" id="descripcionMostrado">{{ descripcion_perfil }}</h3>
          {% else %}
            <h3 class="descripcion-resumen">No hay descripcion registrada</h3>
          {% endif %}
        </div>
      </div>



        
     <!-- Experiencia -->
  <div class="experiencia">
  <div class="titulo-izquierda">
    <span>Experiencias</span>
  </div>

  {% set experiencias_validas = experiencias | selectattr("nombre") | list %}

  {% if experiencias_validas|length > 0 %}
    {% for exp in experiencias_validas %}
      <div class="item-experiencia">
        <div class="experienciaicon">
          {% if exp.nombre %}
            <h2 class="titulo-experiencia">{{ exp.nombre }}</h2>
          {% endif %}
        </div>

        {% if exp.descripcion %}
          <p class="empresa">{{ exp.descripcion }}</p>
        {% endif %}

        {% if exp.fecha_inicio_experiencia and exp.fecha_fin_experiencia %}
          <p class="fechas">DESDE: {{ exp.fecha_inicio_experiencia }}, HASTA: {{ exp.fecha_fin_experiencia }}</p>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <div class="item-experiencia">
      <div class="experienciaicon descripcionicon" style="text-align:center;">
        <h3 class="descripcion-resumen">No hay experiencias registradas.</h3>
      </div>
    </div>
  {% endif %}
</div>



<div class="estudios">
      <div class="titulo-izquierda">
        <span>Estudios</span>
      </div>

      {% set estudios_validos = estudios | selectattr("titulo_obtenido") | list %}

      {% if estudios_validos|length > 0 %}
        {% for est in estudios_validos %}
          <div class="item-estudios">
            <div class="estudiosicon">
              <h2 class="titulo-estudios">{{ est.titulo_obtenido }}</h2>
            </div>

            {% if est.institucion %}
              <p class="lugar">{{ est.institucion }}</p>
            {% endif %}

            {% if est.nivel_educativo %}
              <p class="lugar">{{ est.nivel_educativo }}</p>
            {% endif %}

            {% if est.fecha_inicio and est.fecha_fin %}
              <p class="fecha">DESDE: {{ est.fecha_inicio }}, HASTA: {{ est.fecha_fin }}</p>
            {% endif %}
          </div>
        {% endfor %}
      {% else %}
        <div class="experienciaicon descripcionicon" style="text-align:center;">
          <h3 class="descripcion-resumen">No hay estudios registrados.</h3>
        </div>
      {% endif %}
    </div>

          
        
   
    </div>

    
<!-- Columna derecha -->
<div class="columna-derecha">
  <div class="cuadro-pequeno">
    {% if idiomas %}
      <!-- Idiomas -->
      <div class="idiomas">
        <h2 class="titulo-idiomas">Idiomas</h2>
      </div>
      {% for idioma in idiomas %}
        {% if idioma.nombre_idioma %}
          <div class="idioma-item">
            <i class="bi bi-check2-circle icono-idioma"></i>
            <span class="idioma-nombre">{{ idioma.nombre_idioma }}</span>
            {% if idioma.nivel %}
              <span class="idioma-nivel">{{ idioma.nivel }}</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    {% else %}
      <div class="idiomas">
        <h2 class="titulo-idiomas">Idiomas</h2>
      </div>
      <div class="experienciaicon descripcionicon" style="text-align:center;">
          <h3 class="descripcion-resumen">No hay idiomas registrados.</h3>
      </div>
    {% endif %}
  </div>

  
<!-- Aptitudes -->
    <div class="cuadro-pequeno">
      <div class="idiomas">
        <h2 class="titulo-idiomas">Aptitudes</h2>
      </div>

      {# selecciona solo las aptitudes que tienen tipo_aptitud truthy #}
      {% set valid_aptitudes = aptitudes|selectattr('tipo_aptitud')|list %}

      {% if valid_aptitudes %}
        {% for aptitud in valid_aptitudes %}
          <div class="idioma-item">
            <i class="bi bi-check2-circle icono-idioma"></i>
            <span class="idioma-nombre">{{ aptitud.tipo_aptitud }}</span>
          </div>
        {% endfor %}
      {% else %}
        <div class="experienciaicon descripcionicon" style="text-align:center;">
          <h3 class="descripcion-resumen">No hay aptitudes registradas.</h3>
        </div>
      {% endif %}
    </div>


  </div>

</div>


  <!-- Carrucel-->

  <!-- Columna derecha: Calificaciones -->
      <div class="contenedor">
        <h2 id="titulo-favoritos">Calificaciones</h2>
        <div class="slider-container">
          <div class="slider" id="slider">
            {% if calificaciones %}
              {% for c, u, p in calificaciones %}
              <div class="card">
                {% if p.foto_perfil %}
                <img src="{{ url_for('web.perfil_foto', filename=p.foto_perfil) }}" alt="Foto de perfil" />
                {% else %}
                <i class="bi bi-person-circle perfil-img placeholder-icon"></i>
                {% endif %}
                <div class="card-content">
                  <h3>{{ p.primer_nombre }} {{ p.primer_apellido }}</h3>
                  <div class="estrellasTarjetas">
                    {% for i in range(1, 6) %}
                      {% if i <= c.puntaje %}
                        <i class="bi bi-star-fill"></i>
                      {% else %}
                        <i class="bi bi-star"></i>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <p class="descripcion">{{ c.reseña }}</p>
                  <small>{{ c.fecha_calificacion.strftime('%d/%m/%Y') }}</small>
                </div>
              </div>
              {% endfor %}
            {% else %}
              <p class="sin-calificaciones">Aún no tiene calificaciones.</p>
            {% endif %}
          </div>

          <!-- Flechas solo visuales, si quieres -->
          <div class="arrows">
            <button class="arrow-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="none" stroke="#3EAEB1" stroke-width="2.5" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 8 8 12 12 16" />
                <line x1="16" y1="12" x2="8" y2="12" />
              </svg>
            </button>

            <button class="arrow-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="none" stroke="#3EAEB1" stroke-width="2.5" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 8 16 12 12 16" />
                <line x1="8" y1="12" x2="16" y2="12" />
              </svg>
            </button>
          </div>
        </div>
      </div>
  </div>


  <script src="{{ url_for('static', filename='js/perfil.experto.js') }}"></script>


{% include 'footer.html' %}

</body>
</html>
