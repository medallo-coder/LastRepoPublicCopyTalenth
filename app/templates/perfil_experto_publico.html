<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi perfil experto</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/perfil_publico.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://i.postimg.cc/26ZkKCPm/Vector.png">
</head>
<body>

   {% include 'nav.html' %}
   {% include 'errors.html' %} 
<style>

</style>
  <!-- Primer cuadro navegación --> 
<div class= "experto"> 
  <div class="cuadro redondo">
    <div class="tabs">
      <span class="tab active">Perfil Experto</span>
    </div>
  </div>

  <!-- Segundo cuadro información principal -->
  <div class="cuadro grande">
    <div class="contenido-grande">
      <div class="titulo-principal">
        {{ perfil.primer_nombre }} {{ perfil.primer_apellido }}
      </div>

        {% if perfil.foto_perfil %}
       <!-- Círculo con ícono debajo del título -->
        <img src="{{ url_for('web.perfil_foto', filename=perfil.foto_perfil) }}" alt="Foto de perfil" class="image" />
        {% else %}
        <!-- Icono de Bootstrap como reemplazo -->
        <i class="bi bi-person-circle perfil-img placeholder-icon"></i>
        {% endif %}
  

  </div>

</div>


<!-- Contenedor dividido en dos columnas -->
  <div class="contenedor-columnas">
    <!-- Columna izquierda -->
    <div class="columna-izquierda">
      <!-- Título Descripción alineado a la izquierda -->
      <div class="titulo-izquierda">
        <span>Descripción</span>
      </div>

      <!-- Pequeña descripción debajo del título -->
      <div class="item-descripcion">
        <div class="descripcionicon">
          {% if descripcion_perfil %}
            <h3 class="descripcion-resumen" id="descripcionMostrado">{{ descripcion_perfil }}</h3>
          {% else %}
            <h3 class="descripcion-resumen">No hay descripcion registrada</h3>
          {% endif %}
        </div>
      </div>



        
     <!-- Experiencia -->
  <div class="experiencia">
  <div class="titulo-izquierda">
    <span>Experiencias</span>
  </div>

  {% set experiencias_validas = experiencias | selectattr("nombre") | list %}

  {% if experiencias_validas|length > 0 %}
    {% for exp in experiencias_validas %}
      <div class="item-experiencia">
        <div class="experienciaicon">
          {% if exp.nombre %}
            <h2 class="titulo-experiencia">{{ exp.nombre }}</h2>
          {% endif %}
        </div>

        {% if exp.descripcion %}
          <p class="empresa">{{ exp.descripcion }}</p>
        {% endif %}

        {% if exp.fecha_inicio_experiencia and exp.fecha_fin_experiencia %}
          <p class="fechas">DESDE: {{ exp.fecha_inicio_experiencia }}, HASTA: {{ exp.fecha_fin_experiencia }}</p>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <div class="item-experiencia">
      <div class="experienciaicon descripcionicon" style="text-align:center;">
        <h3 class="descripcion-resumen">No hay experiencias registradas.</h3>
      </div>
    </div>
  {% endif %}
</div>



<div class="estudios">
      <div class="titulo-izquierda">
        <span>Estudios</span>
      </div>

      {% set estudios_validos = estudios | selectattr("titulo_obtenido") | list %}

      {% if estudios_validos|length > 0 %}
        {% for est in estudios_validos %}
          <div class="item-estudios">
            <div class="estudiosicon">
              <h2 class="titulo-estudios">{{ est.titulo_obtenido }}</h2>
            </div>

            {% if est.institucion %}
              <p class="lugar">{{ est.institucion }}</p>
            {% endif %}

            {% if est.nivel_educativo %}
              <p class="lugar">{{ est.nivel_educativo }}</p>
            {% endif %}

            {% if est.fecha_inicio and est.fecha_fin %}
              <p class="fecha">DESDE: {{ est.fecha_inicio }}, HASTA: {{ est.fecha_fin }}</p>
            {% endif %}
          </div>
        {% endfor %}
      {% else %}
        <div class="experienciaicon descripcionicon" style="text-align:center;">
          <h3 class="descripcion-resumen">No hay estudios registrados.</h3>
        </div>
      {% endif %}
    </div>

          
        
   
    </div>

    
<!-- Columna derecha -->
<div class="columna-derecha">
  <div class="cuadro-pequeno">
    {% if idiomas %}
      <!-- Idiomas -->
      <div class="idiomas">
        <h2 class="titulo-idiomas">Idiomas</h2>
      </div>
      {% for idioma in idiomas %}
        {% if idioma.nombre_idioma %}
          <div class="idioma-item">
            <i class="bi bi-check2-circle icono-idioma"></i>
            <span class="idioma-nombre">{{ idioma.nombre_idioma }}</span>
            {% if idioma.nivel %}
              <span class="idioma-nivel">{{ idioma.nivel }}</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    {% else %}
      <div class="idiomas">
        <h2 class="titulo-idiomas">Idiomas</h2>
      </div>
      <div class="experienciaicon descripcionicon" style="text-align:center;">
          <h3 class="descripcion-resumen">No hay idiomas registrados.</h3>
      </div>
    {% endif %}
  </div>

  
<!-- Aptitudes -->
    <div class="cuadro-pequeno">
      <div class="idiomas">
        <h2 class="titulo-idiomas">Aptitudes</h2>
      </div>

      {# selecciona solo las aptitudes que tienen tipo_aptitud truthy #}
      {% set valid_aptitudes = aptitudes|selectattr('tipo_aptitud')|list %}

      {% if valid_aptitudes %}
        {% for aptitud in valid_aptitudes %}
          <div class="idioma-item">
            <i class="bi bi-check2-circle icono-idioma"></i>
            <span class="idioma-nombre">{{ aptitud.tipo_aptitud }}</span>
          </div>
        {% endfor %}
      {% else %}
        <div class="experienciaicon descripcionicon" style="text-align:center;">
          <h3 class="descripcion-resumen">No hay aptitudes registradas.</h3>
        </div>
      {% endif %}
    </div>


  </div>

</div>


  <!-- Carrucel-->

  <div class="contenedor">
    <h2 id="titulo-favoritos">Calificaciones</h2>
    <div class="slider-container">
      <div class="slider" id="slider">

        <!-- Tarjeta 1 -->
        <div class="card">
          <div>
            <img src="" alt="" />
          </div>
            <div class="card-content">
              <h3 >Claudia Henao</h3>
              <div class="estrellasTarjetas">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
              <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
            </div>
        </div>
        
        <!-- Tarjeta 2 -->
        <div class="card">
          <div>
            <img src="" alt="" />
          </div>
            <div class="card-content">
              <h3 >Claudia Henao</h3>
              <div class="estrellasTarjetas">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
              <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
            </div>
        </div>

        <!-- Tarjeta 3 -->
        <div class="card">
          <div>
            <img src="" alt="" />
          </div>
            <div class="card-content">
              <h3 >Claudia Henao</h3>
              <div class="estrellasTarjetas">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
              <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
            </div>
        </div>

        <!-- Tarjeta 4 -->
        <div class="card">
          <div>
            <img src="" alt="" />
          </div>
            <div class="card-content">
              <h3 >Claudia Henao</h3>
              <div class="estrellasTarjetas">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
              <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
            </div>
        </div>

        <!-- Tarjeta 5 -->
        <div class="card">
          <div>
            <img src="" alt="" />
          </div>
            <div class="card-content">
              <h3 >Claudia Henao</h3>
              <div class="estrellasTarjetas">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
              <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
            </div>
        </div>
        
  
      </div>

      <!-- Flechas -->
      <div class="arrows">
        <button class="arrow-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="none" stroke="#3EAEB1" stroke-width="2.5" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" />
            <polyline points="12 8 8 12 12 16" />
            <line x1="16" y1="12" x2="8" y2="12" />
          </svg>
        </button>
        
        <button class="arrow-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="none" stroke="#3EAEB1" stroke-width="2.5" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" />
            <polyline points="12 8 16 12 12 16" />
            <line x1="8" y1="12" x2="16" y2="12" />
          </svg>
        </button>
      </div>
    </div>
  </div>


 <!-- Formulario de edición de contacto, inicialmente oculto -->
<div class="formulario-editar" id="formulario-editar">
  <div class="formulario-contenido">
    <h2>Editar contacto</h2>
    <form method="POST" action="{{ url_for('web.perfil_experto') }}">
      <input type="hidden" name="form_tipo2" value="perfil_principal2">
      <div class="campo">
        <input type="text" id="primer_nombre" name="primer_nombre" value="{{ primer_nombre }}" placeholder="Primer nombre" required>
      </div>
      <div class="campo">
        <input type="text" id="segundo_nombre" name="segundo_nombre" value="{{ segundo_nombre }}" placeholder="Segundo nombre(opcional)" >
      </div>
      <div class="campo">
        <input type="text" id="primer_apellido" name="primer_apellido" value="{{ primer_apellido }}" placeholder="Primer apellido" required>
      </div>
      <div class="campo">
        <input type="text" id="segundo_apellido" name="segundo_apellido" value="{{ segundo_apellido }}" placeholder="Segundo apellido(opcional)" >
      </div>
      <div class="botones">
        <button type="submit">Guardar</button>
        <button type="button" onclick="cerrarFormulario()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Formulario para añadir descripción -->
<div id="formulario-añadir-descripcion" style="display:none;">
  <div class="formulario-contenido-descripcion">
    <h2>Añadir Descripción</h2>
    <form  method="POST" action="{{ url_for('web.perfil_experto') }}">
      <input type="hidden" name="form_tipo2" value="perfil_principal3">  
      <div class="campo">
        <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
        <input type="text" maxlength="255" id="descripcionAñadir" name="descripcion_perfil" placeholder="Escribe la descripción">
      </div>
      <div class="botones">
        <button type="submit">Guardar</button>
        <button type="button" onclick="cerrarFormularioDescripcion()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Formulario para editar descripción -->
<div id="formulario-editar-descripcion" style="display:none;">
  <div class="formulario-contenido-descripcion">
    <h2>Editar Descripción</h2>
    <form method="POST" action="{{ url_for('web.perfil_experto') }}">
      <input type="hidden" name="form_tipo2" value="editar_descripcion">
      <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
      <div class="campo">
        <input type="text" id="descripcionEditar" name="descripcion_perfil" placeholder="Editar tu descripción">
      </div>
      <div class="botones">
        <button type="submit">Guardar</button>
        <button type="button" onclick="cerrarFormularioeditarDescripcion()">Cancelar</button>
      </div>
    </form>
  </div>
</div>


<!-- Formulario emergente para añadir experiencia -->
<div class="formulario-experiencia" id="formulario-experiencia">
  <div class="formulario-experiencia-contenido">
    <h2>Añadir experiencia</h2>
    <form method="POST" action="{{ url_for('web.perfil_experto') }}">
      <input type="hidden" name="form_tipo6" value="experiencia">
      <div class="campo">
        <input type="text" id="cargo" name="nombre" placeholder="Cargo" required maxlength="100">
      </div>
      <div class="campo">
        <input type="text" id="empresa" name="descripcion" placeholder="Empresa" required maxlength="100">
      </div>
      <div class="campo">
        <input type="date" id="desde" name="fecha_inicio_experiencia" placeholder="Desde (ej: enero 2023)" required maxlength="50">
      </div>
      <div class="campo">
        <input type="date" id="hasta" name="fecha_fin_experiencia" placeholder="Hasta (ej: septiembre 2024)" required maxlength="50">
      </div>
      <div class="botones">
        <button type="submit">Guardar</button>
        <button type="button" onclick="cerrarFormularioExperiencia()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Formulario emergente para editar experiencia -->
<div class="formulario-editar-experiencia" id="formulario-editar-experiencia" >
  <div class="formulario-editar-experiencia-contenido">
    <h2>Editar experiencia</h2>
    <form method="POST" action="{{ url_for('web.perfil_experto') }}">
      <div class="campo">
        <input type="hidden" name="form_tipo6" value="editar_experiencia">
        <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
      </div>
      <div class="campo">
        <input type="text" id="editar-cargo" name="nombre" value="{{nombre_experiencia}}" required maxlength="100">
      </div>
      <div class="campo">
        <input type="text" id="editar-empresa" name="descripcion" value="{{descripcion_experiencia}}" required maxlength="100">
      </div>
      <div class="campo">
        <input type="date" id="editar-desde" name="fecha_inicio_experiencia" value="{{fecha_inicio_experiencia}}" required maxlength="50">
      </div>
      <div class="campo">
        <input type="date" id="editar-hasta" name="fecha_fin_experiencia" value="{{fecha_fin_experiencia}}" required maxlength="50">
      </div>
      <div class="botones">
        <button type="submit">Guardar</button>
        <button type="button" onclick="cerrarFormularioEditarExperiencia()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Formulario emergente para añadir estudios -->
<div class="formulario-estudios" id="formulario-estudios">
  <div class="formulario-estudios-contenido">
    <h2>Añadir estudios</h2>
    <form method="POST" action="{{ url_for('web.perfil_experto') }}">
      <input type="hidden" name="form_tipo5" value="estudios">
      <div class="campo">
        <input type="text" id="titulo" name="titulo_obtenido" placeholder="Titulo"  required maxlength="100">
      </div>
      <div class="campo">
        <input type="text" id="lugar" name="institucion" placeholder="Institucion"  required maxlength="100">
      </div>
      <div class="campo">
        <input type="date" id="fechaDesde" name="fecha_inicio"   required >
      </div>
      <div class="campo">
        <input type="date" id="fechaHasta" name="fecha_fin"   required >
      </div>
      <div class="botones">
        <button type="submit">Guardar</button>
        <button type="button" onclick="cerrarFormularioEstudios()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Formulario emergente para editar estudios -->
<div class="formulario-editar-estudios" id="formulario-editar-estudios">
  <div class="formulario-editar-estudios-contenido">
    <h2>Editar estudios</h2>
    <form method="POST" action="{{ url_for('web.perfil_experto') }}">
      <div class="campo">
        <input type="hidden" name="form_tipo5" value="editar_estudios">
        <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
      
        
      <div class="campo"></div>
        <input type="text" id="editar-titulo" name="titulo_obtenido" value="{{titulo_obtenido}}" required maxlength="100">
      </div>
      <div class="campo">
        <input type="text" id="editar-lugar" name="institucion" value="{{institucion}}" required maxlength="100">
      </div>
      <div class="campo">
        <input type="date" id="editar-fechaDesde" name="fecha_inicio" value="{{fecha_inicio}}" required maxlength="50">
      </div>
      <div class="campo">
        <input type="date" id="editar-fechaHasta" name="fecha_fin" value="{{fecha_fin}}" required maxlength="50">
      </div>
      <div class="botones">
        <button type="submit">Guardar</button>
        <button type="button" onclick="cerrarFormularioEditarEstudios()">Cancelar</button>
      </div>
    </form>
    </div>
  </div>
</div>

 <!-- Modal para ver imagen en grande -->
<div id="imagenModal" class="modal-overlay" style="display: none;">
  <span id="cerrarModal" class="close">&times;</span>
  <img class="modal-content" id="imagenAmpliada" />
</div>

<script src="{{ url_for('static', filename='js/perfil.experto.js') }}"></script>
<script src="{{ url_for('static', filename='js/perfil_publico.js') }}"></script>
{% include 'footer.html' %}
</body>
</html>
