<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi perfil experto</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/perfil_experto.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://i.postimg.cc/26ZkKCPm/Vector.png">
</head>

<body>

  {% include 'nav.html' %}
  {% include 'errors.html' %}

  <!-- Primer cuadro navegación -->
  <div class="experto">
    <div class="cuadro redondo">
      <div class="tabs">
        <div class="tabs__main">
          <div class="active_tab"></div>
          <div class="tabs__tab" data-href="{{ url_for('web.perfil_experto') }}">Mi perfil</div>
          <div class="tabs__tab" data-href="{{ url_for('web.mis_publicaciones') }}">Mis publicaciones</div>
        </div>
      </div>
    </div>

    <!-- Segundo cuadro información principal -->
    <div class="cuadro grande">
      <div class="contenido-grande">
        <div class="titulo-principal">
          {{ primer_nombre }} {{ segundo_nombre }} {{ primer_apellido }} {{ segundo_apellido }}
        </div>

        {% set imagen_url = url_for('web.perfil_foto', filename=foto_perfil) if foto_perfil else '' %}
        <!-- Círculo con ícono debajo del título -->
        <div class="contenedor-circulo" onclick="document.getElementById('fileInput').click()">
          <div class="circulo-icono" id="preview"
            style="background-image: url('{{ imagen_url }}'); background-size: cover; background-position: center;">
            {% if not foto_perfil %}
            <i class="bi bi-person-fill-add"></i>
            {% endif %}
          </div>

          <!-- Campo oculto de archivo -->
          <form method="POST" action="{{ url_for('web.perfil_experto') }}" enctype="multipart/form-data"
            id="formImagen">
            <input type="hidden" name="form_tipo1" value="foto_perfil">
            <input type="file" name="foto" id="fileInput" accept="image/*" style="display: none;"
              onchange="mostrarImagen(event)">
          </form>
        </div>


        <div class="estrellas">
          <i class="bi bi-star-fill"></i>
          <i class="bi bi-star-fill"></i>
          <i class="bi bi-star-fill"></i>
          <i class="bi bi-star-fill"></i>
          <i class="bi bi-star-fill"></i>
        </div>

      </div>


      <div class="icono-lapiz">
        <!-- Icono de lápiz de Bootstrap -->
        <i class="bi bi-pencil-square" onclick="accionLapiz()"></i>
      </div>
    </div>


    <!-- Contenedor dividido en dos columnas -->
    <div class="contenedor-columnas">
      <!-- Columna izquierda -->
      <div class="columna-izquierda">
        <!-- Título Descripción alineado a la izquierda -->
        <div class="titulo-izquierda">
          <span>Descripción</span>
        </div>

        <!-- Pequeña descripción debajo del título -->
        <div class="item-descripcion">
          <div class="descripcionicon">
            <h3 class="descripcion-resumen" id="descripcionMostrado">{{ descripcion_perfil }}</h3>

            {% if descripcion_perfil %}
            <div class="iconos">
              <i id="lapizdescripcion" class="bi bi-pencil-square" onclick="mostrarFormularioeditarDescripcion()"></i>
              <form method="POST" action="{{ url_for('web.perfil_experto') }}" style="display: inline;">
                <input type="hidden" name="form_tipo2" value="eliminar_descripcion">
                <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
                <button type="submit" class="boton-icono" title="Eliminar descripción"
                  onclick="return confirm('¿Seguro que deseas eliminar la descripción?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>

            </div>
            {% endif %}

          </div>
        </div>

        <!-- Botón para añadir descripción -->
        {% if not descripcion_perfil %}
        <div class="añadir-descripcion" id="btnAñadirDescripcion" onclick="mostrarFormularioDescripcion()">
          + Añadir descripción
        </div>
        {% endif %}


        <!-- Experiencia -->
        <div class="experiencia">
          <div class="titulo-izquierda">
            <span>Experiencia</span>
          </div>
          <div class="item-experiencia">

            <div class="experienciaicon">
              <h2 class="titulo-experiencia">{{ nombre_experiencia }}</h2>
              <h3 class="rol"></h3>

              {% if nombre_experiencia %}
              <div class="iconos">
                <i id="lapizexperiencia" class="bi bi-pencil-square"></i>
                <form method="POST" action="{{ url_for('web.perfil_experto') }}" style="display: inline;">
                  <input type="hidden" name="form_tipo6" value="eliminar_experiencia">
                  <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
                  <button type="submit" class="boton-icono" title="Eliminar experiencia"
                    onclick="return confirm('Seguro que deseas eliminar la experiencia?')">
                    <i class="bi bi-trash"></i>
                  </button>
                </form>
              </div>
              {% endif %}

            </div>

            <p class="empresa">{{ descripcion_experiencia }}</p>

            {% if fecha_inicio_experiencia and fecha_fin_experiencia %}
            <p class="fechas">DESDE: {{ fecha_inicio_experiencia }}, HASTA: {{ fecha_fin_experiencia }}</p>
            {% else %}
            <p class="fechas"></p>
            {% endif %}
          </div>
        </div>

        <!-- Botón para añadir experiencia (siempre visible) -->
        <div class="añadir-experiencia" onclick="mostrarFormularioExperiencia()">
          + Añadir experiencia
        </div>

        <!-- Estudios -->
        <div class="estudios">
          <div class="titulo-izquierda">
            <span>Mis estudios</span>
          </div>

          <div class="item-estudios">
            <div class="estudiosicon">
              <h2 class="titulo-estudios">{{ titulo_obtenido }}</h2>
              <h3 class="titulo"></h3>

              {% if titulo_obtenido or institucion %}
              <div class="iconos">
                <i id="lapizestudios" class="bi bi-pencil-square"></i>

                <form method="POST" action="{{ url_for('web.perfil_experto') }}" style="display: inline;">
                  <input type="hidden" name="form_tipo5" value="eliminar_estudios">
                  <input type="hidden" name="id_perfil" value="{{ id_perfil }}">

                  <button type="submit" class="boton-icono" title="Eliminar estudios"
                    onclick="return confirm('Seguro que deseas eliminar los estudios?')">
                    <i class="bi bi-trash"></i>
                  </button>
                </form>
              </div>
              {% endif %}
            </div>

            <p class="lugar">{{ institucion }}</p>

            {% if fecha_inicio and fecha_fin %}
            <p class="fecha">DESDE: {{ fecha_inicio }}, HASTA: {{ fecha_fin }}</p>
            {% else %}
            <p class="fecha"></p>
            {% endif %}
          </div>
        </div>


        <!-- Botón para añadirestudios -->
        <div class="añadir-estudios" onclick="mostrarFormularioEstudios()">
          + Añadir estudios
        </div>
      </div>



      <!-- Columna derecha -->
      <div class="columna-derecha">
        <div class="cuadro-pequeno">

          {% if nombre_idioma %}
          <!-- Idiomas -->
          <div class="idiomas">
            <h2 class="titulo-idiomas">Idiomas</h2>
            <i id="agregaridiomas" class="bi bi-plus-circle-fill"></i>
          </div>

          <div class="idioma-item">
            <i class="bi bi-check2-circle icono-idioma"></i>
            <span class="idioma-nombre">{{ nombre_idioma }}</span>
            <span class="idioma-nivel"><!--(Nativo)--> </span>

            <form method="POST" action="{{ url_for('web.perfil_experto') }}" style="display: inline;">
              <input type="hidden" name="form_tipo3" value="eliminar_idioma">
              <input type="hidden" name="id_perfil" value="{{ id_perfil }}">

              <button type="submit" class="boton-icono" title="Eliminar idioma"
                onclick="return confirm('Seguro que deseas eliminar el  idioma?')">
                <i class="bi bi-trash"></i>
              </button>
            </form>
          </div>

          {% else %}

          <div class="cuadro-pequeno">
            <!-- Aptitudes -->
            <div class="idiomas">
              <h2 class="titulo-idiomas">Idiomas</h2>
              <i id="agregaridiomas" class="bi bi-plus-circle-fill"></i>
            </div>

            {% endif %}


            <div class="idioma-item">
              <!--<i class="bi bi-check2-circle icono-idioma"></i> -->
              <span class="idioma-nombre"></span>
              <span class="idioma-nivel"></span>
              <!-- <i class="bi bi-trash icono-borrar"></i> -->
            </div>
          </div>


          {% if tipo_aptitud %}
          <div class="cuadro-pequeno">
            <!-- Aptitudes -->
            <div class="idiomas">
              <h2 class="titulo-idiomas">Aptitudes</h2>
              <i id="agregaraptitudes" class="bi bi-plus-circle-fill"></i>
            </div>

            <div class="idioma-item">
              <i class="bi bi-check2-circle icono-idioma"></i>
              <span class="idioma-nombre">{{ tipo_aptitud }}</span>

              <form method="POST" action="{{ url_for('web.perfil_experto')  }}" style="display: inline;">
                <input type="hidden" name="form_tipo4" value="eliminar_aptitud">
                <input type="hidden" name="id_perfil" value="{{ id_perfil }}">

                <button type="submit" class=" boton-icono" title="Eliminar idioma"
                  onclick="return confirm('Seguro que deseas eliminar el  idioma?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </div>

            {% else %}
            <div class="cuadro-pequeno">
              <!-- Aptitudes -->
              <div class="idiomas">
                <h2 class="titulo-idiomas">Aptitudes</h2>
                <i id="agregaraptitudes" class="bi bi-plus-circle-fill"></i>
              </div>

              {% endif %}

              <div class="idioma-item">
                <!-- <i class="bi bi-check2-circle icono-idioma"></i> -->
                <span class="idioma-nombre"></span>
                <!--  <i class="bi bi-trash icono-borrar"></i> -->
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- Carrucel-->

      <div class="contenedor">
        <h2 id="titulo-favoritos">Calificaciones</h2>
        <div class="slider-container">
          <div class="slider" id="slider">

            <!-- Tarjeta 1 -->
            <div class="card">
              <div>
                <img src="" alt="" />
              </div>
              <div class="card-content">
                <h3>Claudia Henao</h3>
                <div class="estrellasTarjetas">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                </div>
                <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
              </div>
            </div>

            <!-- Tarjeta 2 -->
            <div class="card">
              <div>
                <img src="" alt="" />
              </div>
              <div class="card-content">
                <h3>Claudia Henao</h3>
                <div class="estrellasTarjetas">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                </div>
                <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
              </div>
            </div>

            <!-- Tarjeta 3 -->
            <div class="card">
              <div>
                <img src="" alt="" />
              </div>
              <div class="card-content">
                <h3>Claudia Henao</h3>
                <div class="estrellasTarjetas">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                </div>
                <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
              </div>
            </div>

            <!-- Tarjeta 4 -->
            <div class="card">
              <div>
                <img src="" alt="" />
              </div>
              <div class="card-content">
                <h3>Claudia Henao</h3>
                <div class="estrellasTarjetas">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                </div>
                <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
              </div>
            </div>

            <!-- Tarjeta 5 -->
            <div class="card">
              <div>
                <img src="" alt="" />
              </div>
              <div class="card-content">
                <h3>Claudia Henao</h3>
                <div class="estrellasTarjetas">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                </div>
                <p class="descripcion">Excelente trabajador, cumplió con todas sus responsabilidades, muy puntual.</p>
              </div>
            </div>


          </div>

          <!-- Flechas -->
          <div class="arrows">
            <button class="arrow-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="none" stroke="#3EAEB1"
                stroke-width="2.5" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 8 8 12 12 16" />
                <line x1="16" y1="12" x2="8" y2="12" />
              </svg>
            </button>

            <button class="arrow-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="none" stroke="#3EAEB1"
                stroke-width="2.5" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 8 16 12 12 16" />
                <line x1="8" y1="12" x2="16" y2="12" />
              </svg>
            </button>
          </div>
        </div>
      </div>


      <!-- Formulario de edición de contacto, inicialmente oculto -->
      <div class="formulario-editar" id="formulario-editar">
        <div class="formulario-contenido">
          <h2>Editar contacto</h2>
          <form method="POST" action="{{ url_for('web.perfil_experto') }}">
            <input type="hidden" name="form_tipo2" value="perfil_principal2">
            <div class="campo">
              <input type="text" id="primer_nombre" name="primer_nombre" value="{{ primer_nombre }}"
                placeholder="Primer nombre" required>
            </div>
            <div class="campo">
              <input type="text" id="segundo_nombre" name="segundo_nombre" value="{{ segundo_nombre }}"
                placeholder="Segundo nombre(opcional)">
            </div>
            <div class="campo">
              <input type="text" id="primer_apellido" name="primer_apellido" value="{{ primer_apellido }}"
                placeholder="Primer apellido" required>
            </div>
            <div class="campo">
              <input type="text" id="segundo_apellido" name="segundo_apellido" value="{{ segundo_apellido }}"
                placeholder="Segundo apellido(opcional)">
            </div>
            <div class="botones">
              <button type="submit">Guardar</button>
              <button type="button" onclick="cerrarFormulario()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Formulario para añadir descripción -->
      <div id="formulario-añadir-descripcion" style="display:none;">
        <div class="formulario-contenido-descripcion">
          <h2>Añadir Descripción</h2>
          <form method="POST" action="{{ url_for('web.perfil_experto') }}">
            <input type="hidden" name="form_tipo2" value="perfil_principal3">
            <div class="campo">
              <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
              <input type="text" id="descripcionAñadir" name="descripcion_perfil" placeholder="Escribe la descripción">
            </div>
            <div class="botones">
              <button type="submit">Guardar</button>
              <button type="button" onclick="cerrarFormularioDescripcion()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Formulario para editar descripción -->
      <div id="formulario-editar-descripcion" style="display:none;">
        <div class="formulario-contenido-descripcion">
          <h2>Editar Descripción</h2>
          <form method="POST" action="{{ url_for('web.perfil_experto') }}">
            <input type="hidden" name="form_tipo2" value="editar_descripcion">
            <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
            <div class="campo">
              <input type="text" id="descripcionEditar" name="descripcion_perfil" placeholder="Editar tu descripción">
            </div>
            <div class="botones">
              <button type="submit">Guardar</button>
              <button type="button" onclick="cerrarFormularioeditarDescripcion()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>


      <!-- Formulario emergente para añadir experiencia -->
      <div class="formulario-experiencia" id="formulario-experiencia">
        <div class="formulario-experiencia-contenido">
          <h2>Añadir experiencia</h2>
          <form method="POST" action="{{ url_for('web.perfil_experto') }}">
            <input type="hidden" name="form_tipo6" value="experiencia">
            <div class="campo">
              <input type="text" id="cargo" name="nombre" placeholder="Cargo" required maxlength="100">
            </div>
            <div class="campo">
              <input type="text" id="empresa" name="descripcion" placeholder="Empresa" required maxlength="100">
            </div>
            <div class="campo">
              <input type="date" id="desde" name="fecha_inicio_experiencia" placeholder="Desde (ej: enero 2023)"
                required maxlength="50">
            </div>
            <div class="campo">
              <input type="date" id="hasta" name="fecha_fin_experiencia" placeholder="Hasta (ej: septiembre 2024)"
                required maxlength="50">
            </div>
            <div class="botones">
              <button type="submit">Guardar</button>
              <button type="button" onclick="cerrarFormularioExperiencia()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Formulario emergente para editar experiencia -->
      <div class="formulario-editar-experiencia" id="formulario-editar-experiencia">
        <div class="formulario-editar-experiencia-contenido">
          <h2>Editar experiencia</h2>
          <form method="POST" action="{{ url_for('web.perfil_experto') }}">
            <div class="campo">
              <input type="hidden" name="form_tipo6" value="editar_experiencia">
              <input type="hidden" name="id_perfil" value="{{ id_perfil }}">
            </div>
            <div class="campo">
              <input type="text" id="editar-cargo" name="nombre" value="{{nombre_experiencia}}" required
                maxlength="100">
            </div>
            <div class="campo">
              <input type="text" id="editar-empresa" name="descripcion" value="{{descripcion_experiencia}}" required
                maxlength="100">
            </div>
            <div class="campo">
              <input type="date" id="editar-desde" name="fecha_inicio_experiencia" value="{{fecha_inicio_experiencia}}"
                required maxlength="50">
            </div>
            <div class="campo">
              <input type="date" id="editar-hasta" name="fecha_fin_experiencia" value="{{fecha_fin_experiencia}}"
                required maxlength="50">
            </div>
            <div class="botones">
              <button type="submit">Guardar</button>
              <button type="button" onclick="cerrarFormularioEditarExperiencia()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Formulario emergente para añadir estudios -->
      <div class="formulario-estudios" id="formulario-estudios">
        <div class="formulario-estudios-contenido">
          <h2>Añadir estudios</h2>
          <form method="POST" action="{{ url_for('web.perfil_experto') }}">
            <input type="hidden" name="form_tipo5" value="estudios">
            <div class="campo">
              <input type="text" id="titulo" name="titulo_obtenido" placeholder="Titulo" required maxlength="100">
            </div>
            <div class="campo">
              <input type="text" id="lugar" name="institucion" placeholder="Institucion" required maxlength="100">
            </div>
            <div class="campo">
              <input type="date" id="fechaDesde" name="fecha_inicio" required>
            </div>
            <div class="campo">
              <input type="date" id="fechaHasta" name="fecha_fin" required>
            </div>
            <div class="botones">
              <button type="submit">Guardar</button>
              <button type="button" onclick="cerrarFormularioEstudios()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Formulario emergente para editar estudios -->
      <div class="formulario-editar-estudios" id="formulario-editar-estudios">
        <div class="formulario-editar-estudios-contenido">
          <h2>Editar estudios</h2>
          <form method="POST" action="{{ url_for('web.perfil_experto') }}">
            <div class="campo">
              <input type="hidden" name="form_tipo5" value="editar_estudios">
              <input type="hidden" name="id_perfil" value="{{ id_perfil }}">


              <div class="campo"></div>
              <input type="text" id="editar-titulo" name="titulo_obtenido" value="{{titulo_obtenido}}" required
                maxlength="100">
            </div>
            <div class="campo">
              <input type="text" id="editar-lugar" name="institucion" value="{{institucion}}" required maxlength="100">
            </div>
            <div class="campo">
              <input type="date" id="editar-fechaDesde" name="fecha_inicio" value="{{fecha_inicio}}" required
                maxlength="50">
            </div>
            <div class="campo">
              <input type="date" id="editar-fechaHasta" name="fecha_fin" value="{{fecha_fin}}" required maxlength="50">
            </div>
            <div class="botones">
              <button type="submit">Guardar</button>
              <button type="button" onclick="cerrarFormularioEditarEstudios()">Cancelar</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Formulario superpuesto para Añadir Idioma -->
    <div class="formulario-idioma" id="formularioIdioma" style="display: none;">
      <div class="formulario-contenido">
        <h2>Añadir idioma</h2>
        <form method="POST" action="{{ url_for('web.perfil_experto') }}">
          <input type="hidden" name="form_tipo3" value="idioma">
          <div class="campo">
            <label for="idiomaSelect"></label>
            <select id="idiomaSelect" name="nombre_idioma">
              <option value="" disabled selected> Selecciona el idioma </option>
              <option value="Español">Español</option>
              <option value="Inglés">Inglés</option>
              <option value="Francés">Francés</option>
              <option value="Alemán">Alemán</option>
              <option value="Portugués">Portugués</option>
            </select>
          </div>
          <!--
    <div class="campo">
      <label for="nivelSelect"></label>
      <select id="nivelSelect" name=" nivel">
        <option value="" disabled selected> Selecciona el nivel</option>
        <option value="Muy básico">Muy básico</option>
        <option value="Básico">Básico</option>
        <option value="Intermedio">Intermedio</option>
        <option value="Avanzado">Avanzado</option>
        <option value="Nativo">Nativo</option>
      </select>
    </div>
-->
          <div class="botones">
            <button type="submit">Guardar</button>
            <button type="button" onclick="cerrarFormularioIdiomas()">Cancelar</button>
          </div>
        </form>
      </div>
    </div>


    <!-- Formulario superpuesto para Añadir Aptitudes -->
    <div class="formulario-aptitudes" id="formularioAptitudes" style="display: none;">
      <div class="formulario-contenido">
        <h2>Añadir aptitudes</h2>
        <form method="POST" action="{{ url_for('web.perfil_experto') }}">
          <input type="hidden" name="form_tipo4" value="aptitud">

          <div class="campo">
            <label for="nuevaAptitud"></label>
            <input type="text" id="nuevaAptitud" name="tipo_aptitud"
              placeholder="Escribe una aptitud (ej: Liderazgo)" />
          </div>

          <div class="botones">
            <button type="submit">Guardar</button>
            <button type="button" onclick="cerrarFormularioAptitudes()">Cancelar</button>
          </div>
        </form>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/perfil.experto.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tabs.js') }}"></script>


    {% include 'footer.html' %}
</body>

</html>