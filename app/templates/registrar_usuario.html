<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrarse</title>
    <link rel="icon" type="image/png" href="https://i.postimg.cc/26ZkKCPm/Vector.png">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/registrar_usuario.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>
<body>

   <div class="left-group">
        <a href="/" class="link">
            <img src="{{ url_for('static', filename='images/Vector.svg') }}" alt="logo" class="logo">
            <div class="logo-text">
                <h1>Cali<span class="azul">Trabaja</span></h1>
            </div>
        </a>
    </div>

    <!-- Mostrar errores y mensajes -->
    {% include 'errors.html' %}

    <div class="register-form">
        <h1>Registrate</h1>
        <br>
        <form method="post" action="{{ url_for('web.registrarse') }}">

            <div class="input-group">
                <span class="input-icon"><i class="bi bi-person-fill"></i></span>
                <input type="text" name="primer_nombre" placeholder="Primer nombre"  
                value="{{ request.form.get('primer_nombre', '') }}"  required>
            </div>

            <div class="input-group">
                <span class="input-icon"><i class="bi bi-person-fill"></i></span>
                <input type="text" name="primer_apellido" placeholder="Primer apellido" 
                value="{{ request.form.get('primer_apellido', '') }}"required>
            </div>

            <div class="input-group">
                <span class="input-icon"><i class="bi bi-at"></i></span>
                <input type="text" name="correo" placeholder="Correo Electrónico" 
                    value="{{ request.form.get('correo', '') }}"
                    required>
            </div>

            <!-- Mostrar errores -->
            <div class="messages-container">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert {{ category }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>




            <div class="input-group password-group">
                <span class="input-icon"><i class="bi-lock-fill"></i></span>
                <input type="password" name="contrasena" placeholder="Contraseña" id="pass1" required>
                <i class="bi bi-eye-fill toggle-pass eye-icon"></i>
            </div>
           <!-- Mensaje de error para requisitos de contraseña (ahora aparece ARRIBA de los checks) -->
            <div id="password-req-error" style="color: red; font-size: 13px; margin-left: 10px; display: none;"></div>

            <div id="password-requirements" style="font-size: 12px; color: #666; margin-left: 10px; margin-top: 5px;">
                <p><span id="req-length"><i class="bi bi-x-circle text-danger"></i></span> Al menos 6 caracteres</p>
                <p><span id="req-uppercase"><i class="bi bi-x-circle text-danger"></i></span> Al menos 1 letra mayúscula</p>
            </div>



            <div class="input-group">
                <span class="input-icon"><i class="bi-lock-fill"></i></span>
                <input type="password" name="confirmar_contrasena" placeholder="Repetir Contraseña" id="pass2" required>
                <i class="bi bi-eye-fill toggle-pass eye-icon"></i>
            </div>
            
            <div id="password-match"></div>



            <button type="submit" class="bt-login">Registrate</button>

            <br>
            <a href="{{ url_for('web.iniciar_sesion') }}" class="bt-recuperar-pasword">¿Ya tienes una cuenta?</a>
        </form>
    </div>

    <script src="{{ url_for('static', filename='js/ocultar_contraseña.js') }}"></script>
    <script src="{{ url_for('static', filename='js/registrar_usuario.js') }}"></script>


</body>
</html>
